# IVE 추천시스템 (M4 Final LLM)

## 📋 프로젝트 개요

IVE 추천시스템은 사용자의 광고 상호작용 이력을 기반으로 개인화된 광고 추천을 제공하는 콘텐츠 기반 추천 시스템입니다. 실제 광고 플랫폼 데이터(1,477,341개 상호작용)를 기반으로 현실적인 사용자 행동 패턴을 반영한 추천 시스템을 제공합니다.

### 🎯 핵심 특징
- **실제 데이터 기반**: 1,477,341개 실제 상호작용 데이터 분석
- **실시간 추천**: 1-2초 내 개인화된 광고 추천
- **자동 로딩**: 복잡한 설정 없이 즉시 사용 가능
- **확장성**: 5,000개 광고 중에서 최적의 추천

## 🚀 주요 기능

### 1. 콘텐츠 기반 추천
- **코사인 유사도** 기반 Top-K 추천
- **사용자 프로필**과 **광고 피처** 매칭
- **60개 피처**를 활용한 정교한 추천
- **5,000개 광고** 중에서 개인화된 추천

### 2. 실제 상호작용 분석
- **실제 상호작용 데이터** 기반 분석 (1,477,341개 상호작용)
- **실제 디바이스 ID** 사용 (예: '31380637', '53455653')
- **상호작용 타입** 구분:
  - `클릭+전환`: 5,077개 (50.0%)
  - `클릭`: 5,077개 (50.0%)
- **리워드 포인트** 정확한 계산

### 3. 사용자 인터페이스
- **Streamlit 기반** 웹 인터페이스
- **자동 데이터 로딩**: 실제 샘플 데이터 자동 사용
- **사용자 선택**: 드롭다운 또는 랜덤 선택 (실제 디바이스 ID)
- **실시간 추천**: 즉시 결과 확인
- **상세 분석**: 추천 결과 및 상호작용 이력 표시

### 4. 타입/카테고리 가중치 시스템
- **자동 가중치 적용**: 사용자 과거 상호작용과 일치하는 광고에 자동으로 추가 점수
- **고정 보너스 값**: 성능 최적화를 위해 고정된 보너스 값 사용
- **다단계 보너스**:
  - 타입+카테고리 모두 일치: +0.05 (100% 보너스)
  - 타입만 일치: +0.025 (50% 보너스)
  - 카테고리만 일치: +0.015 (30% 보너스)

## 📊 데이터 구조

### 원본 실제 데이터
- **총 상호작용**: 1,477,341개 (원본)
- **고유 사용자**: 583,386명 (원본)
- **고유 광고**: 2,819개 (원본)

### 광고 타입 및 카테고리
- **타입**: 설치형, 실행형, 참여형, 클릭형, 페북, 트위터, 인스타, 노출형, 퀘스트, 유튜브, 네이버, CPS(물건구매)
- **카테고리**: 앱(간편적립), 구독(간편적립), 간편미션-퀘즈(간편적립), 경험하기(게임적립), 멀티보상(게임적립), 금융(참여적립), 무료참여(참여적립), 유료참여(참여적립), 쇼핑-상품별카테고리(쇼핑적립), 제휴몰(쇼핑적립), 간편미션(간편적립)
- **사용자별 상호작용 분포**:
  - 평균: 2.5개, 중간값: 1개, 표준편차: 5.6개
  - 최대: 2,659개, 최소: 1개
- **상호작용 타입 분포**:
  - 클릭+전환: 771,091개 (52.2%)
  - 클릭: 706,250개 (47.8%)

### 샘플 데이터 (현재 사용 중)
- **총 상호작용**: 1,265개 (샘플)
- **사용자**: 377명 (샘플)
- **광고**: 5,091개 (확장된 샘플) - 우선 사용
- **사용자별 상호작용 분포**:
  - 평균: 2.53개, 중간값: 2.0개, 표준편차: 1.5개
  - 최대: 9개, 최소: 1개
- **사용자 분포** (실제 데이터 기반):
  - **실제 디바이스 ID 사용** (예: '31380637', '53455653')
  - 92.0% 사용자가 2개 이상 상호작용
- **상호작용 타입 분포**:
  - 클릭+전환: 918개 (72.6%)
  - 클릭: 347개 (27.4%)

### 광고 메타데이터
- **총 광고**: 5,000개 (확장된 샘플) - 우선 사용
- **광고 정보**: 타입, 카테고리, 이름, 리워드 가격
- **피처 벡터**: 60차원 피처 벡터
- **광고 분포** (균등 분포):
  - 모든 광고가 1-50개 상호작용
  - 실제 광고 패턴 기반 확장

## 📈 성능 평가

### 데이터 품질 지표
- **상호작용 밀도**: 0.066% (377명 사용자 × 5,091개 광고 대비)
- **사용자 활성도**: 92.0% (2개 이상 상호작용한 사용자 비율)
- **광고 인기도**: 1.3% (2개 이상 상호작용받은 광고 비율)

### 광고 타입 분포
- **참여형**: 4,861개 (95.5%) - 주요 광고 타입
- **설치형**: 119개 (2.3%)
- **CPS(물건구매)**: 30개 (0.6%)
- **실행형**: 53개 (1.0%)
- **기타**: 28개 (0.6%)

### 광고 카테고리 분포
- **간편미션-퀘즈**: 4,765개 (93.6%) - 주요 카테고리
- **앱(간편적립)**: 135개 (2.7%)
- **경험하기(게임적립)**: 45개 (0.9%)
- **구독(간편적립)**: 27개 (0.5%)
- **기타**: 119개 (2.3%)

### 상호작용 패턴
- **클릭+전환**: 918개 (72.6%) - 높은 전환율
- **클릭**: 347개 (27.4%) - 기본 클릭
- **평균 사용자당 상호작용**: 2.53개 (현실적인 수준)

## 🛠️ 기술 스택

- **Python**: 3.8+
- **Streamlit**: 웹 인터페이스
- **Pandas**: 데이터 처리
- **NumPy**: 수치 계산
- **Scikit-learn**: 코사인 유사도 계산
- **Plotly**: 시각화

## 📁 프로젝트 구조

```
IVE_Reco/
├── recommender/
│   └── app_streamlit.py          # 메인 Streamlit 앱
├── 데이터 파일 (ZIP 압축)
│   ├── ads_profile_expanded_sample.zip     # 확장된 광고 데이터 (5,000개)
│   ├── user_profile_sample.zip             # 기본 샘플 사용자 데이터 (500명)
│   └── correct_interactions_sample.zip     # 기본 샘플 상호작용 데이터 (10,154개) 
├── 설정 파일
│   ├── requirements.txt                    # Python 의존성
│   ├── .gitignore                          # Git 무시 파일
│   └── STREAMLIT_DEPLOYMENT.md             # 배포 가이드
└── README.md                               # 프로젝트 설명서
```

## 🚀 실행 방법

### 1. 환경 설정
```bash
pip install streamlit pandas numpy scikit-learn plotly
```

### 2. Streamlit 앱 실행
```bash
streamlit run recommender/app_streamlit.py
```

### 3. 브라우저 접속
- **로컬**: http://localhost:8501
- **네트워크**: http://192.168.1.120:8501

### 4. 자동 데이터 로딩
- **실제 샘플 데이터** 자동 로딩
- **실제 디바이스 ID** 사용
- **5,000개 광고** 중에서 개인화된 추천

## 📈 성능 지표

### 추천 정확도
- **코사인 유사도** 기반 매칭
- **타입/카테고리 일치 보너스** 시스템 (자동 적용)
- **Top-K 추천** (기본값: 20개)
- **실시간 추천** (평균 1-2초)
- **성능 최적화** (고정 가중치 사용)

### 데이터 품질
- **실제 샘플 데이터**: 10,154개 상호작용 (500명 사용자, 5,000개 광고)
- **실제 디바이스 ID** 사용
- **원본 데이터 기반**: 1,477,341개 실제 상호작용 데이터 분석
- **자동 데이터 로딩**: 복잡한 설정 없이 즉시 사용 가능

## 🔧 주요 수정 사항

### 1. 실제 데이터 기반 구현
- **실제 상호작용 데이터** 사용: 1,477,341개 원본 데이터 분석
- **실제 디바이스 ID** 사용: 가상 ID 대신 실제 ID 표시
- **균등 분포** 적용: 모든 사용자/광고가 1-50개 상호작용
- **원본 데이터 분석**: 실제 광고 플랫폼 데이터 기반

### 2. 자동 데이터 로딩 시스템
- **우선순위 기반** 데이터 선택: 확장된 샘플 → 기본 샘플 → 원본 데이터
- **ZIP 압축** 파일 자동 해제 및 로딩
- **복잡한 설정 없이** 즉시 사용 가능

### 3. 확장된 광고 데이터
- **5,000개 광고**: 1,000개 실제 + 4,000개 확장
- **다양한 추천 옵션**: 더 풍부한 추천 결과
- **실제 광고 패턴** 기반 확장

### 4. 타입/카테고리 가중치 시스템
- **자동 가중치 적용**: 사용자 과거 상호작용과 일치하는 광고에 자동으로 추가 점수
- **고정 보너스 값**: 성능 최적화를 위해 고정된 보너스 값 사용 (0.05)
- **다단계 보너스**: 타입+카테고리, 타입만, 카테고리만 일치에 따른 차등 보너스

### 5. 성능 최적화
- **캐싱**: `@st.cache_data` 데코레이터 사용
- **메모리 효율성**: 필요한 컬럼만 로드
- **로딩 시간**: 최적화된 데이터 처리
- **조용한 로딩**: 불필요한 메시지 제거

## 📝 사용법

### 1. 환경 설정
```bash
# 의존성 설치
pip install streamlit pandas numpy scikit-learn plotly

# Streamlit 앱 실행
streamlit run recommender/app_streamlit.py
```

### 2. 자동 데이터 로딩
- **실제 샘플 데이터** 자동 로딩
- **ZIP 압축 파일** 자동 해제
- **복잡한 설정 없이** 즉시 사용 가능

### 3. 사용자 선택
- **드롭다운**: 실제 디바이스 ID 직접 선택 (500명 중)
- **랜덤 선택**: 랜덤 사용자 자동 선택

### 4. 추천 결과 확인
- **Top-K 추천**: 5,000개 광고 중 추천된 광고 목록
- **최종점수**: 콘텐츠 유사도 + 타입/카테고리 보너스
- **광고 정보**: 타입, 카테고리, 이름 등
- **자동 가중치**: 과거 상호작용과 일치하는 광고에 자동 보너스 적용

### 5. 상호작용 분석
- **사용자 정보**: 총 상호작용, 고유 광고 수, 총 리워드 금액
- **상호작용 이력**: 실제 상호작용한 광고 목록
- **상호작용 타입**: 클릭+전환 vs 클릭 구분
- **실제 데이터**: 실제 디바이스 ID와 상호작용 패턴 사용

## 🎯 향후 개선 계획

1. **하이브리드 추천**: 콘텐츠 기반 + 협업 필터링
2. **실시간 학습**: 사용자 피드백 기반 모델 업데이트
3. **A/B 테스트**: 추천 알고리즘 성능 비교
4. **개인화 강화**: 더 세밀한 사용자 프로필링
5. **대용량 데이터 지원**: 원본 1,477,341개 상호작용 데이터 직접 사용
6. **실시간 추천**: 사용자 행동 기반 실시간 추천 업데이트

## 🌟 주요 특징

- **실제 데이터**: 실제 광고 플랫폼 데이터 기반 (1,477,341개 상호작용)
- **실제 디바이스 ID**: 가상 ID 대신 실제 디바이스 ID 사용
- **자동 로딩**: 복잡한 설정 없이 즉시 사용 가능
- **확장성**: 5,000개 광고로 풍부한 추천 옵션
- **성능 최적화**: 빠른 로딩과 실시간 추천

---

**IVE 추천시스템** - 개인화된 광고 추천을 위한 콘텐츠 기반 추천 시스템
